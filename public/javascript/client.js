$(document).ready(function(){function e(){var e=$(".incomplete");$("#taskCounter").html(e.length+" tasks remaining")}$(".sortable").on("click",".checkbox",function(){$(this).parent().submit()}),e(),$(".sortable").sortable(),$(".sortable").disableSelection(),$("#newTaskForm").submit(function(a){a.preventDefault(),$.ajax("/tasks",{method:"POST",data:$("#newTaskForm").serialize(),success:function(a){console.log(a);var s=$("<li>").addClass("taskList incomplete ui-sortable-handle"),t=$("<form/>").addClass("submitForm id"),n=$("<div/>").addClass("row"),l=$("<div/>").addClass("small-1 columns"),d=$("<form/>",{"class":"submitForm id",action:"/tasks/completed/"+a._id,method:"POST",enctype:"application/x-www-form-urlencoded"}),o=$("<input/>",{name:"task",id:a._id,type:"checkbox","class":"checkbox"}),i=$("<label/>").addClass("label"),p=$("<i/>").addClass("fa fa-2x fa-check-square-o"),c=$("<div/>").addClass("small-5 columns titleToShowTask"),r=$("<a/>",{href:a._id}),m=$("<span/>").addClass("title"),u=$("<div/>",{"class":"row hiddenNote",style:"display: none"}),f=$("<div/>").addClass("small-5 columns small-offset-1"),b=$("<span/>").addClass("notes"),h=$("<div/>").addClass("small-6 columns"),k=$("<a>",{href:"/tasks/"+a._id+"/edit"}),v=$("<i>",{"class":"fa fa-2x fa-pencil-square"}),w=$("<button>",{"class":"edit",text:"Edit"});w.append(v),k.append(w);var x=$("<form>",{"class":"deleteForm",action:"/tasks/"+a._id+"?_method=DELETE",method:"POST",enctype:"application/x-www-form-urlencoded"}),T=$("<i>",{"class":"fa fa-2x fa-bomb"}),C=$("<button>",{"class":"delete",text:"Delete",type:"submit"});C.append(T),x.append(C),$(".sortable").append(s),t.append(o),d.append(i),i.append(p),d.append(o),n.append(l).append(c).append(h),s.append(n),l.append(d),c.append(r),r.append(m.text(a.title)),f.append(b.text(a.notes)),u.append(f),s.append(u),n.append(k),n.append(x),console.log(s),e()},failure:function(){}}),$("#newTaskForm")[0].reset()}),$(".sortable").on("submit",".deleteForm",function(a){var s=$(this).attr("action"),t=$(this);a.preventDefault(),$.ajax(s,{method:"POST",success:function(){t.closest("li").remove(),e()},failure:function(){}})}),$(".sortable").on("click",".titleToShowTask",function(e){e.preventDefault(),$(this).parent(".row").siblings(".hiddenNote").slideToggle()})});