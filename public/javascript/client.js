$(document).ready(function(){function e(){var e=$(".incomplete");$("#taskCounter").html(e.length+" tasks remaining")}$(".sortable").on("click",".checkbox",function(){$(this).parent().submit()}),e(),$(".sortable").sortable(),$(".sortable").disableSelection(),$("#newTaskForm").submit(function(a){a.preventDefault(),$.ajax("/tasks",{method:"POST",data:$("#newTaskForm").serialize(),success:function(a){console.log(a);var s=$("<li>").addClass("taskList incomplete ui-sortable-handle"),t=$("<form/>").addClass("submitForm id"),n=$("<div/>").addClass("row"),l=$("<div/>").addClass("small-1 columns"),d=$("<form/>",{"class":"submitForm id",action:"/tasks/completed/#{task._id}",method:"POST",enctype:"application/x-www-form-urlencoded"}),o=$("<input/>",{name:"task",id:a._id,type:"checkbox","class":"checkbox"}),i=$("<label/>").addClass("label"),p=$("<i/>").addClass("fa fa-2x fa-check-square-o"),c=$("<div/>").addClass("small-5 columns titleToShowTask"),r=$("<a/>",{href:a._id}),m=$("<span/>").addClass("title"),u=$("<span/>").addClass("notes"),f=($("<div/>").addClass("row hiddenNote"),$("<div/>").addClass("small-5 columns small-offset-1"),$("<div/>").addClass("small-6 columns")),b=$("<a>",{href:a._id}),h=$("<i>",{"class":"fa fa-2x fa-pencil-square"}),k=$("<button>",{"class":"edit",text:"Edit"});k.append(h),b.append(k);var v=$("<form>",{"class":"deleteForm",action:"/tasks/#{task._id}?_method=DELETE",method:"POST",enctype:"application/x-www-form-urlencoded"}),w=$("<i>",{"class":"fa fa-2x fa-bomb"}),x=$("<button>",{"class":"delete",text:"Delete",type:"submit"});x.append(w),v.append(x),$(".sortable").append(s),t.append(o),d.append(i),i.append(p),d.append(o),n.append(l).append(c).append(f),s.append(n),l.append(d),c.append(r),r.append(m.text(a.title)),s.append(u.text(a.notes)),s.append(b),s.append(v),console.log(s),e()},failure:function(){}}),$("#newTaskForm")[0].reset()}),$(".sortable").on("submit",".deleteForm",function(a){var s=$(this).attr("action"),t=$(this);a.preventDefault(),$.ajax(s,{method:"POST",success:function(){t.closest("li").remove(),e()},failure:function(){}})}),$(".titleToShowTask").on("click",function(e){e.preventDefault(),$(this).parent(".row").siblings(".hiddenNote").slideToggle()})});